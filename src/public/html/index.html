<html>
	<head>
		<script
			src="https://code.jquery.com/jquery-3.4.1.min.js"
			integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
			crossorigin="anonymous"></script>
			<link rel="stylesheet" href="/static/css/index.css">
	</head>
	<body>
		<h1>BTC MKII</h1>
		<form id="login" enctype="multipart/form-data">
			<p>Username:</p>
			<input id="username" name="username" type="text" />
			<p>Password:</p>
			<input id="password" name="password" type="password" />
			<br />
			<input type="submit" />
        </form>
        <div class="loader" style="display: none"></div>
        <div class="disclaimer" style="display: none">Please be patient, this can take up to 20 seconds!<br>Personally, I would blame Bethel and their silly new login page.</div>
        <div>The Data Received:<div class="results"></div></div>
		<script>
			$("#login").on("submit", function() {
				var data = $(this).serializeArray();
                $('.loader').css('display', 'block');
                $('.disclaimer').css('display', 'block');
				$.ajax({
					url: "/submit",
					type: "post",
					data: data,
					success: function(result) {
                        window.classes = result;
                        $('.results').html(`<p>${JSON.stringify(result)}</p>`);
                        $('.loader').css('display', 'none');
                        $('.disclaimer').css('display', 'none');
					},
					error: function(result) {
                        $('.results').html(`<p>Something went wrong.. sorry ðŸ˜­:</p><p>${JSON.stringify(result)}</p>`);
                        $('.loader').css('display', 'none');
                        $('.disclaimer').css('display', 'none');
					}
				});
				return false;
			});
		</script>
	</body>
</html>
